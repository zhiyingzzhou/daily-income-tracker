# 安装和使用指南

本指南将帮助您快速安装和使用实时收入计算器VSCode扩展。

## 🚀 快速安装

### 方法一：从VS Code市场安装（推荐）

1. **打开VS Code**
2. **打开扩展面板** (`Ctrl+Shift+X`)
3. **搜索 "实时收入计算器"**
4. **点击"安装"按钮**

### 方法二：从源码安装（适合开发）

1. **克隆项目**

```bash
git clone https://github.com/zhiyingzzhou/daily-income-tracker.git
cd daily-income-tracker
```

2. **安装依赖**

```bash
npm install
```

3. **构建项目**

```bash
# 一键构建
npm run build

# 或分步构建
npm run compile          # 编译TypeScript代码
npm run build-webview    # 构建前端React应用
```

4. **安装扩展**

```bash
# 生成.vsix文件
npm run package

# 在VSCode中安装
# 打开VSCode -> 扩展面板 -> 右上角"..." -> "从VSIX安装..."
# 选择dist目录下生成的.vsix文件
```

### 方法三：开发模式（用于测试）

1. **在VSCode中打开项目**

```bash
code daily-income-tracker
```

2. **启动开发模式**

```bash
# 一键启动开发模式（推荐）
npm run dev

# 或分别启动
# 终端1：编译TypeScript（监听模式）
npm run watch

# 终端2：构建前端（监听模式）
npm run dev-webview
```

3. **调试扩展**

- 按 `F5` 启动扩展开发主机
- 在新的VSCode窗口中测试扩展

## ⚙️ 首次设置

### 1. 验证安装

安装成功后，您应该能看到：

- VSCode状态栏显示收入信息（默认显示¥0.00）
- 命令面板中有"实时收入计算器"相关命令

### 2. 基础配置

1. **打开设置面板**
   - 点击状态栏的收入显示，或
   - 使用命令 `Ctrl+Shift+P` → 搜索"实时收入计算器: 打开收入设置"

2. **配置基础信息**

   ```
   月收入: 10000 元（根据实际情况调整）
   工作天数: 22 天/月（一般是工作日）
   工作时间: 09:00 - 18:00（标准工作时间）
   显示精度: 2位小数
   ```

3. **保存配置**
   - 点击"保存设置"按钮
   - 状态栏会立即更新显示

### 3. 开始使用

1. **开始工作**
   - 方法1: 设置面板 → 仪表盘 → "开始工作"按钮
   - 方法2: 命令面板 → "实时收入计算器: 开始工作"

2. **查看实时收入**
   - 状态栏会显示：`💼 ¥XX.XX (HH:MM)`
   - 每秒自动更新收入和工作时长

3. **结束工作**
   - 方法1: 设置面板 → "结束工作"按钮
   - 方法2: 命令面板 → "实时收入计算器: 结束工作"

## 📊 功能详解

### 仪表盘功能

#### 今日收入概览

- **实时收入**: 当前累计收入
- **目标进度**: 相对于日收入目标的完成百分比
- **工作状态**: 当前是否在工作中
- **快捷操作**: 开始/结束工作、重置数据

#### 工作会话管理

- 支持一天内多次工作会话
- 自动记录每次工作的开始和结束时间
- 显示所有会话的时间段

### 基础设置功能

#### 收入配置

```
月收入: 您的月薪金额
工作天数: 每月实际工作天数
→ 系统自动计算: 日收入 = 月收入 ÷ 工作天数
```

#### 工作时间

```
开始时间: 09:00（标准上班时间）
结束时间: 18:00（标准下班时间）
→ 系统自动计算: 标准工时 = 结束时间 - 开始时间
```

#### 高级选项

- **加班工资**: 启用后，超过标准工时的部分按倍率计算
- **加班倍率**: 例如1.5倍工资（可自定义）
- **早退扣费**: 启用后，未满标准工时会扣除相应收入
- **显示精度**: 收入显示的小数位数（0-4位）
- **预定工作时间**: 使用固定工作时间计算收入
- **隐私模式**: 在状态栏隐藏收入金额，只显示工作时间
- **更新频率**: 状态栏更新频率（自适应/快速/正常/慢速/自定义）

### 云同步功能

#### WebDAV配置

```
服务器地址: https://your-webdav-server.com
用户名: your-username
密码: your-password
```

**推荐服务**:

- 坚果云: https://dav.jianguoyun.com/dav/
- ownCloud: 自建服务器
- Nextcloud: 自建服务器

#### Amazon S3配置

```
端点: s3.amazonaws.com（或其他S3兼容服务）
Access Key: YOUR_ACCESS_KEY
Secret Key: YOUR_SECRET_KEY
存储桶: your-bucket-name
```

#### 阿里云OSS配置

```
端点: oss-cn-hangzhou.aliyuncs.com
AccessKey ID: YOUR_ACCESS_KEY_ID
AccessKey Secret: YOUR_ACCESS_KEY_SECRET
存储桶: your-bucket-name
```

#### 同步功能

- **自动同步**: 启用后定期自动备份数据
- **手动测试**: 验证云服务连接是否正常
- **安全存储**: 所有敏感信息都经过加密
- **冷却机制**: 避免过于频繁的同步请求

### 统计分析功能

#### 基础统计

- **今日收入**: 当前累计收入
- **工作时长**: 今日总工作时间
- **工作会话**: 工作次数
- **平均时薪**: 收入/工作时长

#### 会话分析

- **平均会话时长**: 每次工作的平均时间
- **最长会话**: 单次最长工作时间
- **最短会话**: 单次最短工作时间
- **会话收入**: 每次工作的平均收入

#### 效率分析

- **工作效率指数**: 基于时薪的效率评分
- **工作节奏**: 根据会话时长分析工作类型
- **个性化建议**: 基于数据的工作改进建议

## 💡 使用技巧

### 1. 最佳实践

#### 工作习惯

- **及时开始**: 开始工作时立即启动计时
- **准时结束**: 下班或休息时及时停止计时
- **会话管理**: 对于短暂休息（5-10分钟），建议不停止计时

#### 配置优化

- **精确设置**: 根据实际合同设置月收入和工作天数
- **合理精度**: 推荐使用2位小数，既精确又不过于复杂
- **更新频率**: 使用自适应模式可以平衡实时性和性能
- **隐私保护**: 在公共场合开启隐私模式，避免泄露收入信息
- **备份数据**: 启用云同步，防止数据丢失

### 2. 常见场景

#### 弹性工作制

```
场景: 每天工作时间不固定
建议: 关闭"早退扣费"，启用"加班工资"
效果: 只计算实际工作时间，超时按倍率奖励
```

#### 固定工作制

```
场景: 严格按照8小时工作制
建议: 启用"早退扣费"，根据公司政策设置加班倍率
效果: 模拟真实的工资计算逻辑
```

#### 项目制工作

```
场景: 按项目计费，工作时间灵活
建议: 设置较高的"月收入"作为目标，关闭扣费
效果: 专注于目标达成，激励高效工作
```

### 3. 数据管理

#### 备份策略

- **本地备份**: 数据自动保存在VSCode设置中
- **云端备份**: 启用云同步，定期自动备份
- **手动导出**: 通过云同步功能导出数据文件

#### 隐私保护

- **本地优先**: 默认所有数据存储在本地
- **加密传输**: 云同步数据经过加密处理
- **最小权限**: 只获取必要的云服务权限
- **隐私模式**: 在公共场所隐藏收入金额

## 🔧 故障排除

### 常见问题

#### 1. 扩展无法启动

**症状**: 状态栏没有显示收入信息
**解决方案**:

```bash
# 检查扩展是否正确安装
1. VSCode扩展面板中确认扩展已启用
2. 重启VSCode
3. 查看开发者控制台错误信息（Help → Developer Tools → Console）
```

#### 2. 状态栏显示异常

**症状**: 显示¥NaN或错误数值
**解决方案**:

```bash
# 重置配置
1. 打开设置面板
2. 确认月收入和工作天数为有效数值
3. 点击"重置今日数据"
```

#### 3. 时间计算错误

**症状**: 工作时间与实际不符
**解决方案**:

```bash
# 检查系统时间
1. 确认电脑系统时间正确
2. 重新开始/结束工作
3. 检查工作时间设置是否正确
```

#### 4. 云同步失败

**症状**: 提示同步错误
**解决方案**:

```bash
# 检查网络和配置
1. 确认网络连接正常
2. 验证云服务配置信息
3. 使用"测试连接"功能
4. 检查云服务的访问权限
```

#### 5. 前端界面无法显示

**症状**: 设置面板空白或报错
**解决方案**:

```bash
# 重新构建
1. 重新安装扩展
2. 清除浏览器缓存（如果适用）
3. 检查VSCode版本兼容性
```

#### 6. 更新频率不生效

**症状**: 状态栏更新频率与设置不符
**解决方案**:

```bash
# 检查更新频率设置
1. 确认更新频率配置正确
2. 重启扩展或VSCode
3. 如使用自定义频率，确保值不低于100ms
```

### 获取帮助

如果遇到其他问题：

1. **查看日志**
   - 打开VSCode开发者工具
   - 查看Console中的错误信息

2. **提交Issue**
   - 访问项目GitHub页面
   - 详细描述问题和环境信息
   - 提供错误日志（如果有）

3. **联系支持**
   - 发送邮件至：zhiyingzzhou@gmail.com
   - 包含VSCode版本、操作系统、扩展版本等信息

## 📈 进阶使用

### 自定义更新频率

- **自适应模式**: 根据用户活动自动调整更新频率
  - 活跃状态: 1秒更新一次
  - 空闲状态: 5秒更新一次
- **固定模式**: 选择预设的更新频率
  - 快速: 1秒
  - 正常: 3秒
  - 慢速: 5秒
- **自定义模式**: 设置自定义毫秒数（最低100ms）

### 工作时间设置

- **自动开始工作**: 在设定的工作时间自动开始计时
- **使用预定工作时间**: 从设定的工作开始时间计算收入
- **定制工作日**: 自定义每周哪几天是工作日

### 团队使用

- 为团队成员设置统一的工作时间配置
- 使用共享云存储进行数据备份
- 定期导出数据进行团队效率分析

### 数据分析

- 导出历史数据进行月度/年度分析
- 结合其他工具进行更深入的数据挖掘
- 设置个人或团队的收入目标和KPI

### 自定义开发

- Fork项目进行个性化定制
- 添加新的云存储服务支持
- 开发额外的统计分析功能

---

**享受高效的工作时间追踪！** 🚀

有任何问题欢迎随时联系我们。
